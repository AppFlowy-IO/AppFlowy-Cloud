<div>
  <h3>Password Change</h3>
  <form
	  hx-post="/web-api/change_password"
	  hx-target="#message"
	  >
  <table>
    <tr>
      <td>New Password:</td>
      <td>
        <input
          class="input"
          type="password"
          name="new_password"
          placeholder="***"
        />
      </td>
    </tr>
    <tr>
      <td>Confirm Password:</td>
      <td>
        <input
          class="input"
          type="password"
          name="confirm_password"
          placeholder="***"
        />
      </td>
    </tr>

    <tr>
      <td></td>
      <td style="text-align: right">
        <button class="button cyan">
          Confirm Change
        </button>
      </td>
    </tr>
  </table>
  </form>

  <script>
    document
      .getElementById("confirmPasswordChange")
      .addEventListener("click", function () {
        const newPassword = document.getElementById("newPassword").value;
        const confirmPassword =
          document.getElementById("confirmPassword").value;

        if (newPassword !== confirmPassword) {
          displayFail("Passwords do not match. Please try again.");
          return;
        }

        fetch("/web-api/change_password", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({ new_password: newPassword }),
        }).then((response) => {
          if (!response.ok) {
            displayHttpStatusAndPayload(response);
          } else {
            displaySuccess("Password changed successfully.");
          }
        });
      });
  </script>
</div>
